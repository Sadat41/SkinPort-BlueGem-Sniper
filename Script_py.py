import asyncio
import discord
from discord.ext import commands
from skinport import Client
from skinport.enums import Currency, AppID, Locale


DISCORD_BOT_TOKEN = "Your_Discord_Bot_Token"  # You need to create a discord bot (This won't work with discord webhook)


# Users to notify
USER_IDS_TO_NOTIFY = [
    Discord_User_ID_Here,  # User 1 -
     Discord_User_ID_Here,  # User 2 
]
#Channel ID to notify
CHANNEL_ID_TO_NOTIFY = Discord_Channel_ID_Here


intents = discord.Intents.default()
intents.messages = True
intents.members = True  # Required to fetch users
bot = commands.Bot(command_prefix="!", intents=intents)


# Define patterns for all items
ITEM_PATTERNS = {
    "Desert Eagle | Heat Treated": {
        1: [490, 148, 69, 704, 16, 48, 66, 67, 96, 111, 117, 159, 259, 263, 273, 297, 
            308, 321, 324, 341, 347, 370, 426, 461, 482, 517, 530, 567, 587, 674, 695, 
            723, 764, 772, 781, 790, 792, 843, 880, 885, 904, 948, 990],
        2: [109, 116, 134, 158, 168, 225, 338, 354, 356, 365, 386, 406, 433, 441, 483, 
            537, 542, 592, 607, 611, 651, 668, 673, 696, 730, 743, 820, 846, 856, 857, 
            870, 876, 878, 882, 898, 900, 925, 942, 946, 951, 953, 970, 998]
        
    },
    "Five-Seven | Heat Treated": {
        1: [16, 48, 66, 67, 69, 96, 111, 117, 148, 159, 259, 263, 273, 297, 308, 321, 
            324, 341, 347, 356, 370, 406, 426, 461, 482, 490, 517, 530, 542, 567, 587, 
            651, 674, 695, 704, 723, 730, 764, 772, 781, 790, 792, 843, 880, 885, 904, 
            948, 953, 990],
        2: [109, 116, 134, 142, 158, 168, 202, 225, 288, 332, 338, 354, 364, 365, 386, 
            402, 433, 441, 483, 524, 525, 537, 592, 607, 611, 649, 668, 673, 696, 701, 
            735, 820, 826, 846, 856, 870, 876, 882, 900, 942, 946, 951, 998],
        3: [0, 1, 7, 19, 44, 53, 61, 62, 113, 114, 120, 201, 260, 284, 316, 344, 346, 
            407, 430, 481, 503, 510, 514, 521, 557, 562, 591, 643, 648, 650, 669, 689, 
            711, 718, 721, 725, 752, 797, 821, 857, 878, 925, 964, 967, 970, 976, 999]
    },
    "AK-47 | Case Hardened": {
        1: [151, 168, 179, 321, 387, 555, 592, 670, 760, 809, 955],
        2: [4, 13, 28, 32, 65, 74, 82, 92, 103, 122, 139, 147, 172, 189, 205, 228, 
            256, 323, 341, 426, 430, 442, 463, 479, 512, 525, 526, 532, 541, 571, 578, 
            605, 617, 627, 695, 698, 708, 713, 750, 752, 791, 828, 844, 868, 887, 888, 
            892, 903, 905, 922, 950, 969, 978, 996]
    },
    "Five-SeveN | Case Hardened": {
        1: [278, 690, 868, 189, 363, 532, 648, 689, 872],
        2: [25, 151, 177, 215, 321, 631, 670, 700, 724, 875, 879, 888],
        3: [13, 28, 101, 103, 126, 265, 344, 369, 381, 387, 413, 426, 428, 430, 434, 
            450, 468, 555, 557, 627, 661, 768, 770, 791, 809, 823, 844, 849, 874, 905, 
            927, 935, 955, 969, 979]
    },
    "Mac-10 | Case Hardened": {
        1: [667, 114, 406, 18, 546, 587, 222, 95, 239, 898, 315],
        2: [503, 959, 924, 29, 147, 414, 311, 195, 328, 652, 251, 570, 379, 964, 400, 
            598, 199, 807, 885, 788, 475, 899, 285, 889, 6, 972, 358, 381, 182, 345, 
            629, 292, 80, 144]
    },
    "‚òÖ Karambit | Case Hardened": {
        1: [387, 4, 73, 269, 417, 442, 463, 470, 776, 809, 853, 868, 888, 902, 905],
        2: [34, 74, 82, 130, 150, 152, 236, 256, 262, 303, 321, 322, 346, 375, 406, 
            413, 453, 494, 503, 507, 509, 510, 541, 550, 601, 643, 661, 698, 727, 770, 
            811, 823, 828, 914, 955],
        3: [9, 11, 20, 25, 30, 57, 59, 92, 112, 138, 139, 154, 179, 182, 216, 246, 
            265, 273, 282, 306, 310, 323, 330, 341, 366, 400, 426, 429, 450, 490, 499, 
            515, 530, 553, 575, 580, 631, 655, 664, 670, 711, 713, 721, 798, 838, 841, 
            844, 849, 852, 856, 891, 917, 965, 989],
        4: [38, 85, 106, 109, 122, 128, 146, 194, 244, 259, 334, 335, 371, 381, 398, 
            405, 407, 420, 430, 455, 472, 485, 487, 488, 522, 539, 555, 563, 571, 595, 
            615, 616, 637, 638, 639, 644, 676, 694, 728, 766, 782, 796, 803, 810, 814, 
            822, 916, 919, 935, 942, 961, 970, 974]
    },
    "‚òÖ M9 Bayonet | Case Hardened": {
        1: [601, 58, 107, 150, 239, 253, 349, 354, 403, 406, 417, 449, 503, 517, 523, 
            550, 585, 634, 675, 897, 946],
        2: [21, 91, 117, 166, 167, 202, 224, 269, 281, 288, 336, 346, 355, 366, 430, 
            613, 628, 715, 793, 813, 867, 880],
        3: [4, 41, 59, 88, 108, 124, 141, 157, 173, 204, 210, 227, 229, 243, 249, 286, 
            293, 295, 298, 319, 345, 356, 372, 393, 476, 490, 525, 529, 533, 546, 553, 
            598, 610, 790, 821, 837, 859, 866, 887, 908, 910, 915, 933, 959]
    },
    "‚òÖ Butterfly Knife | Case Hardened": {
        1: [182, 652, 398, 838, 494, 330],
        2: [29, 371, 881, 638, 283, 868, 891, 917, 749, 214, 928, 510, 913, 488, 703, 
            194, 612, 717, 396, 478, 263, 800, 694],
        3: [964, 798, 705, 358, 664, 424, 618, 458, 858, 130, 112, 629, 782, 902, 457, 
            702, 407, 92, 965, 924, 913, 61, 256, 499, 282, 411, 811, 335, 721, 839, 
            147, 919, 73, 770, 768, 72, 27, 885, 808, 846, 43, 642, 515, 42, 426, 907, 
            98, 799, 655, 767, 318, 643, 958, 534, 711, 872, 474, 628],
        4: [803, 34, 453, 788, 699, 989, 547, 528, 631, 208, 414, 445, 332, 466, 598, 
            630, 322, 375, 880, 38, 893, 916, 842, 841, 269, 854, 273, 575, 905, 255, 
            844, 464, 823, 262, 658, 30, 191, 341, 377, 10, 713, 188, 420, 401, 513, 
            56, 671, 153, 507, 116, 633, 884, 139, 67, 11, 42, 311, 976, 321, 801, 111, 
            901, 442, 826, 236, 906, 927, 974, 405, 306, 720, 776, 809, 853, 74, 522, 
            248, 108, 463, 753, 378, 244, 20, 975, 894, 78, 347, 816, 615, 432, 427, 
            477, 483, 925, 672]
    },
    "‚òÖ Skeleton Knife | Case Hardened": {
        1: [403, 456, 169, 681, 316, 577, 58],
        2: [704, 55, 281, 922, 668, 449, 556, 351, 447, 583, 262, 180, 880, 210, 345, 
            850],
        3: [634, 124, 601, 496, 170, 915, 585, 916, 67, 628, 383, 239, 698, 372, 533, 
            336, 588, 442, 202, 837, 166, 116, 700, 954, 187, 797, 429, 632, 529, 516, 
            157, 547, 14, 294, 103, 525, 624, 503],
        4: [269, 393, 288, 430, 374, 669, 507, 887, 179, 828, 867, 812, 162, 959, 941, 
            10, 853, 387, 820, 299, 640, 818, 902, 776, 606, 417, 872, 91, 680, 955, 
            537, 286, 176, 693, 107, 899, 13, 203, 719, 151, 88, 879, 821, 519, 298, 
            222, 349, 212, 227, 715, 750, 325, 84, 805, 504, 235, 807, 241, 740, 878, 
            619, 292, 910, 689, 675, 334, 866, 651]
    },
    "‚òÖ Talon Knife | Case Hardened": {
        1: [55, 923, 241, 819, 602, 899, 222, 528, 10, 837, 185, 3, 311, 805],
        2: [316, 180, 14, 80, 114, 351, 866, 311, 176, 170, 199, 805, 299, 357, 56, 
            609, 501, 707, 468, 657, 379, 365, 283, 506, 576, 570, 473, 976, 621, 186, 
            505, 815, 960, 293],
        3: [95, 203, 891, 367, 19, 533, 941, 693, 374, 658, 18, 111, 130, 137, 291, 
            669, 660, 883, 599, 328, 749, 488, 491, 761, 798, 58, 46, 830, 345, 583, 
            807, 116],
        4: [618, 917, 481, 292, 881, 598, 547, 633, 76, 838, 557, 730, 890, 347, 411, 
            933, 72, 77, 313, 507, 115, 70, 188, 381, 168, 255, 342, 404, 458, 820, 
            431, 607, 504, 702, 391, 138, 835, 383, 59, 372, 280, 248, 100, 956, 218, 
            75, 927, 780, 552]
    },
    "‚òÖ Bayonet | Case Hardened": {
        1: [555, 592, 670, 151, 179, 321],
        2: [695, 955, 321, 661, 228, 969, 828, 168, 209, 387, 760],
        3: [868, 905, 844, 750, 103, 325, 922, 137, 996, 617, 512, 363, 13, 823, 733, 
            532, 678, 894, 82, 791, 202, 797, 790, 887, 493, 4, 112, 537, 710, 872, 
            430, 281, 715],
        4: [429, 526, 169, 259, 888, 479, 632, 189, 879, 689, 602, 770, 28, 624, 227, 
            360, 759, 352, 481, 577, 681, 690, 850, 434, 324, 456, 278, 869, 349, 235, 
            628, 207, 355, 226, 557, 2, 310, 880, 878, 497, 450, 847, 704, 462, 961, 
            443, 950, 126, 523, 935, 575, 849, 978, 641, 74, 627, 775, 426, 968, 648, 
            344, 381, 795, 685, 768, 927, 807, 874, 862, 172, 403, 290, 782, 442, 139, 
            599, 81, 65, 428, 525, 147, 698, 895, 236, 956, 243, 468, 892, 94, 724, 
            396, 948, 108, 985, 277, 520, 200, 288, 180, 467, 187, 296, 622, 447, 306, 
            397, 149, 14, 286, 604, 463, 492, 708, 101, 178, 645, 124, 322, 261, 237, 
            702, 92, 241, 389, 679, 225, 48, 788, 333, 721, 215, 713, 814, 970, 93, 
            923, 588, 519, 669, 265, 410, 453]
    },
    "‚òÖ Flip Knife | Case Hardened": {
        1: [670, 321, 151, 592, 661, 555],
        2: [828, 955, 179, 387, 844, 168, 868, 363, 791, 750, 823, 103, 760],
        3: [996, 969, 905, 169, 695, 532, 577, 879, 770, 733, 715, 209, 872, 526, 456, 
            13, 681, 430, 189, 112, 887, 689, 28, 628, 228, 137, 878, 922, 4, 768, 479, 
            961, 690, 278, 429, 325],
        4: [557, 426, 935, 892, 349, 575, 704, 648, 888, 724, 147, 481, 403, 450, 850, 
            775, 281, 82, 428, 396, 497, 795, 126, 2, 525, 344, 985, 81, 512, 468, 381, 
            74, 434, 849, 862, 847, 809, 310, 698, 447, 927, 65, 790, 948, 685, 453, 
            200, 978, 236, 970, 894, 306, 235, 645, 950, 172, 139, 519, 202, 333, 14, 
            149, 782, 814, 227, 463, 617, 9, 397, 389, 92, 178, 442, 493, 470, 708, 215, 
            261, 627, 443, 622, 564, 122, 34, 286, 187, 806, 843, 242, 48, 558, 788, 
            322]
    },
     "‚òÖ Kukri Knife | Case Hardened": {
        1: [494, 575, 770, 652, 618, 917, 844, 112, 891, 838, 868, 510, 330, 631, 985, 808],
        2: [130, 283, 335, 721, 468, 798, 702, 841, 664, 371, 182, 38, 881, 638, 811, 643, 682, 61],
        3: [629, 989, 488, 334, 823, 426, 282, 73, 694, 547, 916, 858, 749, 854, 630, 499, 375, 256, 
            442, 961, 116, 919, 306, 902, 853, 522, 776, 411, 92, 809, 262, 612, 885, 505, 398, 528, 
            194, 576, 248, 711, 883, 768, 708, 34, 414, 347, 657, 14, 713, 74, 698, 453, 273, 89, 
            188, 457, 98, 907, 616, 800, 42, 263, 243, 244, 175, 318, 305, 134, 281, 697, 545, 893, 478],
        4: [803, 782, 788, 497, 269, 322, 964, 965, 176, 321, 236, 108, 515, 658, 56, 905, 470, 310, 
            556, 214, 860, 20, 27, 622, 445, 976, 134, 72, 927, 875, 4, 387, 852, 429, 828, 177, 
            341, 753, 557, 147, 458, 507, 311, 849, 816, 953, 633, 153, 955, 109, 866, 191, 899, 
            541, 888, 609, 846, 924, 935, 106, 598, 55, 509, 914, 25, 775, 637, 670, 358, 958, 741, 
            942, 57, 381, 138, 245, 642, 397, 820, 801, 513, 208, 542, 780, 563, 596, 179, 339, 320, 
            377, 11, 395, 101, 655, 717, 700, 254, 53, 672, 29, 168, 928, 254, 365, 727, 85, 826, 
            297, 918, 463, 483, 527]
    },
    "‚òÖ Stiletto Knife | Case Hardened": {
        1: [182, 398, 928, 407, 965, 838, 371, 749, 838, 214, 283, 330, 913, 494],
        2: [74, 713, 917, 868, 92, 453, 322, 112, 798, 721, 139, 891, 321, 905, 664],
        3: [522, 803, 387, 269, 638, 147, 420, 73, 463, 256, 809, 29, 510, 782, 442, 928, 130, 375, 
            853, 964, 273, 839, 208, 242, 335, 244, 776, 330, 788, 507, 11, 919, 82, 282, 470, 358, 
            332, 341, 670, 694, 194, 248, 811, 842, 770, 632, 720, 278, 846, 263],
        4: [661, 690, 902, 881, 541, 955, 655, 773, 306, 652, 401, 698, 34, 978, 598, 885, 823, 695, 
            4, 466, 612, 30, 888, 67, 515, 727, 499, 377, 849, 418, 575, 800, 989, 426, 32, 547, 
            630, 622, 717, 877, 631, 72, 711, 555, 179, 974, 767, 450, 768, 914, 942, 414, 856, 
            924, 889, 236, 136, 797, 151, 405, 429, 975, 808, 27, 458, 61, 310, 411, 799, 424, 884, 
            265, 775, 254, 228, 38, 950, 648, 13, 216, 844, 172, 642, 42, 841, 138, 658, 205, 497, 
            858, 592, 323, 262, 230, 457, 708, 517, 793]
    },
    "‚òÖ Survival Knife | Case Hardened": {
        1: [403, 456, 169, 681, 316, 577, 281, 634, 585, 583],
        2: [704, 922, 55, 449, 668, 351, 601, 447, 210, 850, 628, 880, 556, 180, 58],
        3: [170, 372, 166, 915, 797, 202, 632, 496, 533, 262, 67, 336, 588, 187, 345, 239, 837, 624, 
            103, 383, 529, 700, 698, 157, 179, 288, 430, 887, 393, 429, 954, 916, 349, 812, 867, 
            286, 162, 387, 872, 516],
        4: [442, 828, 955, 537, 669, 818, 14, 417, 941, 750, 116, 503, 715, 525, 374, 151, 606, 294, 
            10, 107, 719, 959, 235, 227, 619, 680, 519, 325, 507, 689, 91, 88, 269, 203, 899, 879, 
            807, 292, 176, 299, 547, 610, 820, 108, 504, 869, 523, 821, 693, 675, 222, 298, 640, 
            710, 532, 969, 878, 363, 760, 526, 866, 84, 806, 261, 665, 613, 790, 805, 794, 902, 
            560, 428, 973, 651, 212, 168, 641, 789, 670, 740, 910, 241, 137, 124, 386]
    },
    "‚òÖ Ursus Knife | Case Hardened": {
        1: [494, 770, 618, 575, 917, 652, 112, 891],
        2: [838, 283, 130, 844, 702, 721, 868, 881, 468, 510, 798, 371, 330, 488, 631, 643, 808, 811],
        3: [638, 664, 858, 907, 576, 61, 841, 248, 38, 182, 749, 528, 854, 961, 73, 505, 334, 306, 
            989, 823, 630, 116, 56, 426, 916, 612, 985, 411, 547, 375, 883, 657, 282, 14, 694, 188, 
            442, 919, 658, 902, 776, 522, 108, 853, 347, 414, 49, 256, 642, 305],
        4: [176, 29, 398, 458, 788, 499, 768, 976, 262, 311, 92, 72, 445, 711, 633, 698, 899, 34, 
            964, 335, 809, 453, 708, 194, 609, 803, 273, 27, 927, 713, 74, 885, 236, 10, 866, 321, 
            269, 89, 780, 322, 175, 965, 905, 55, 707, 98, 191, 782, 457, 801, 429, 556, 387, 147, 
            4, 255, 741, 80, 622, 470, 310, 849, 955, 358, 753, 828, 507, 365, 958, 381, 214, 341, 
            830, 515, 846, 357, 20, 222, 860, 541, 513, 318, 299, 245, 933, 428]
    },
    "‚òÖ Nomad Knife | Case Hardened": {
        1: [577, 456, 169, 681, 55, 403, 922, 704, 316, 850, 628, 187],
        2: [447, 281, 210, 700, 180, 588, 262, 13, 336, 880, 668, 383, 429, 698, 797, 14, 496, 525, 
            634, 166, 529, 442, 872, 583, 103, 632, 585, 624, 955, 294, 558, 723],
        3: [170, 372, 58, 387, 345, 286, 10, 179, 828, 151, 915, 879, 853, 449, 902, 533, 202, 393, 
            640, 818, 916, 935, 363, 940, 556, 954, 750, 168, 648, 516, 719, 776, 239, 235, 325, 
            887, 227, 212, 91, 351, 298, 680, 740, 502, 261, 369, 144, 689, 189, 310, 649, 619, 
            938, 606, 560, 806, 532, 450, 641, 84, 526, 124],
        4: [886, 519, 162, 823, 795, 702, 126, 557, 940, 428, 635, 430, 334, 760, 665, 768, 349, 
            129, 693, 374, 213, 417, 589, 241, 571, 973, 715, 867, 844, 321, 820, 670, 386, 651, 
            941, 849, 636, 537, 910, 617, 278, 236, 592, 690, 504, 107, 81, 878, 791, 312, 121, 
            731, 63, 969, 821, 203, 754, 812, 288, 729, 67, 547, 623, 495, 543, 607]
    },
    "‚òÖ Paracord Knife | Case Hardened": {
        1: [403, 316, 456, 58, 681, 577, 169, 583, 585, 634],
        2: [922, 704, 601, 281, 345, 180, 55, 449, 351, 239, 668, 447, 383, 288, 166],
        3: [837, 210, 880, 430, 915, 628, 850, 556, 372, 503, 170, 349, 202, 525, 496, 262, 67, 
            116, 269, 336, 533, 632, 588, 959, 797, 529, 187, 176, 374, 417, 954, 88, 157, 916, 
            507, 669, 103, 812, 899],
        4: [429, 442, 537, 700, 624, 222, 162, 698, 867, 393, 523, 715, 294, 179, 14, 866, 516, 
            606, 818, 95, 807, 610, 299, 59, 828, 613, 794, 286, 941, 519, 107, 872, 203, 151, 
            227, 292, 387, 719, 325, 821, 750, 91, 235, 10, 805, 400, 955, 859, 995, 138, 680, 
            501, 462, 902, 923, 528, 689, 675, 212, 547, 546, 315, 84, 619, 693, 879, 956, 504, 
            820, 298, 640, 311, 108, 740, 3, 806, 600]
    },
    "‚òÖ Huntsman Knife | Case Hardened": {
        1: [618, 652, 29],
        2: [721, 770, 494, 702, 838, 881, 505, 891, 306, 638, 798, 248, 576, 283, 112, 371, 917, 
            130, 575, 703, 510, 488, 330],
        3: [56, 73, 707, 868, 919, 108, 72, 844, 182, 428, 458, 153, 629, 255, 741, 927, 858, 749, 
            631, 6, 694, 457, 194],
        4: [379, 671, 464, 528, 424, 854, 502, 398, 426, 780, 699, 664, 468, 630, 38, 782, 587, 
            841, 188, 222, 612, 8, 823, 976, 547, 116, 411, 657, 643, 788, 898, 95, 808, 10, 989, 
            916, 811, 367, 282, 633, 761, 902, 414, 92, 358, 776, 830, 809, 853, 114, 899, 311, 
            768, 964, 334, 376, 658, 883, 806, 18, 27, 704, 280, 499, 553, 961, 522, 156, 335, 
            262, 445, 716, 965, 147, 609, 34, 839, 867, 365, 98, 175, 378, 769]
    },
    "‚òÖ Bowie Knife | Case Hardened": {
        1: [182, 398],
        2: [652, 29, 838, 371, 358, 638, 214, 928, 208, 768, 913, 714, 43, 944, 396, 534],
        3: [839, 720, 283, 282, 749, 147, 858, 330, 407, 629, 713, 964, 919, 74, 917, 868, 335, 
            782, 499, 902, 965, 256, 989, 891, 598, 457, 494, 885, 924, 515, 414, 846, 612, 466, 
            753, 767, 642, 399, 478, 263, 628, 872, 987, 474, 110, 880]
    },
    "‚òÖ Falchion Knife | Case Hardened": {
        1: [494, 838, 638, 891, 371, 917, 868, 112, 130, 330, 798, 575, 694, 194, 664, 488],
        2: [283, 749, 182, 398, 721, 770, 919, 652, 881, 522, 38, 214, 885, 964, 989, 902, 841, 73, 
            547, 282, 630, 631, 809, 510, 803, 116, 335, 92, 965, 499, 426, 42, 717, 322, 244, 800, 
            711, 655, 407, 776, 453, 913, 262, 42, 713],
        3: [823, 811, 256, 74, 768, 854, 808, 916, 844, 453, 411, 618, 375, 924, 273, 893, 839, 
            598, 642, 928, 702, 334, 414, 528, 846, 269, 905, 175, 826, 254, 767, 263, 106, 432, 
            708, 985, 61, 89, 332, 341, 515, 20, 643, 265, 470]
    },
    "‚òÖ Gut Knife | Case Hardened": {
        1: [567, 962, 125, 60, 647],
        2: [165, 799, 140, 171, 591, 215, 977, 723, 997, 644, 870, 724, 232, 939, 384, 974, 730, 218, 662, 920, 9, 928],
        3: [756, 50, 40, 477, 729, 971, 836, 86, 691, 552, 540, 388, 953, 245, 466, 272, 776, 758, 510, 795, 639, 428, 922]
    },
    "‚òÖ Shadow Daggers | Case Hardened": {
        1: [56, 505, 417, 609, 657, 576, 707, 80, 14, 618, 468],
        2: [176, 830, 866, 406, 702, 4, 859, 59, 130, 355, 897, 883, 780, 249]
    },
    "‚òÖ Navaja Knife | Case Hardened": {
        1: [398, 407, 838, 371, 182, 839, 638, 720, 74, 749, 919, 713, 913],
        2: [401, 273, 877, 332, 598, 453, 283, 928, 139, 965, 773, 282, 902, 515, 420, 975, 891, 322, 335, 989, 30, 424, 797, 809, 811, 463, 782, 798, 635, 358, 917, 510, 194, 694, 974, 265, 808, 284, 490, 460],
        3: [632, 73, 67, 889, 507, 793, 664, 387, 269, 776, 846, 92, 853, 256, 377, 522, 214, 330, 847, 905, 136, 727, 341, 185, 868, 630, 655, 642, 29, 418, 494, 942, 499, 884, 466, 615, 32, 432, 595],
        4: [470, 826, 885, 82, 112, 803, 405, 594, 841, 547, 670, 768, 202, 20, 881, 799, 823, 612, 254, 259, 38, 68, 717, 767, 11, 152, 541, 208, 721, 86, 924, 901, 865, 198, 945, 936, 916, 964, 979, 631, 130, 888, 400, 375, 308, 244, 714, 315, 4, 21, 658, 958, 458, 61, 249, 442, 216, 580, 352, 967, 42]
    }
}
#End of Pattern ID List (24 Items)



#Discord Bot 
@bot.event
async def on_ready():
    print(f"Logged in as {bot.user}")

    client = Client()

    @client.listen("saleFeed")
    async def on_sale_feed(data):
        print("Full data received:", data)  # Log the full data received from SkinPort
        
        for sale in data.get("sales", []):
            market_hash_name = sale.get("marketHashName")
            pattern = sale.get("pattern")
            print(f"Checking sale: {market_hash_name}, Pattern: {pattern}")  # Log sale details

            if market_hash_name in ITEM_PATTERNS:
                print(f"Found {market_hash_name} in ITEM_PATTERNS")  # Log if the item is found
                for rank, patterns in ITEM_PATTERNS[market_hash_name].items():
                    if pattern in patterns:
                        print(f"Pattern {pattern} matched for rank {rank}")  # Log pattern match
                        await send_discord_notification(USER_IDS_TO_NOTIFY, CHANNEL_ID_TO_NOTIFY, sale, rank)
                        break  # Stop checking further ranks for this item

    try:
        print("Connecting to SkinPort...")  # Log before connecting
        await client.connect(app_id=AppID.csgo, currency=Currency.eur, locale=Locale.en)
        print("Connected to SkinPort successfully")  # Log successful connection
    except Exception as e:
        print(f"Error while connecting to SkinPort: {e}")  # Log any connection errors
    finally:
        await client.close()




# Skinport logic
# Modified send_discord_notification
async def send_discord_notification(users, channel_id, item, rank):
    """Send a DM to multiple users and post in a channel(s)."""
    market_hash_name = item['marketHashName']
    pattern = item.get('pattern', 'Unknown')
    sale_price = item['salePrice']
    suggested_price = item['suggestedPrice']

    embed = {
        "title": f"üî• Rank {rank} {market_hash_name} Detected!",
        "description": (
            f"**Skin:** {market_hash_name}\n"
            f"**Pattern:** {pattern}\n"
            f"**Price:** {sale_price} EUR\n"
            f"**Suggested Price:** {suggested_price} EUR\n"
        ),
        "color": 0xFF5733,
        "fields": [
            {"name": "üß≤ Skinport Link", "value": f"[Buy Now](https://skinport.com/item/{item['url']})", "inline": True},
            {"name": "üîç Inspect Link", "value": f"[Inspect in Game]({item.get('link', 'N/A')})", "inline": True},
        ],
        "footer": {"text": "üö®üóø Powered by SkinPort Sniper", "icon_url": "https://skinport.com/favicon.ico"},
    }

    # Send DM to users
    for user_id in users:
        try:
            user = await bot.fetch_user(user_id)
            await user.send(embed=discord.Embed.from_dict(embed))
            print(f"Notification sent to {user.name}")
        except Exception as e:
            print(f"Failed to send DM to user ID {user_id}: {e}")

    # Send to channel
    try:
        channel = bot.get_channel(channel_id)
        if channel:
            await channel.send(embed=discord.Embed.from_dict(embed))
            print(f"Notification sent to channel {channel.name}")
    except Exception as e:
        print(f"Failed to send message to channel ID {channel_id}: {e}")



# Run the bot
if __name__ == "__main__":
    bot.run(DISCORD_BOT_TOKEN)

